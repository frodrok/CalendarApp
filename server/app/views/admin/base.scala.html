@(user: model.User, groups: Seq[model.JsonGroup], events: Seq[model.JsonEvent], underlings: Seq[model.JsonUser])(implicit environment: play.api.Environment, messages: Messages)

<html>
    <head>
        <link href='@routes.Assets.versioned("stylesheets/fullcalendar.css")' rel="stylesheet">
        <script src='@routes.Assets.versioned("javascripts/lib/moment.min.js")'></script>
        <script src='@routes.Assets.versioned("javascripts/lib/jquery-3.0.0.min.js")'></script>
        <script src='@routes.Assets.versioned("javascripts/lib/fullcalendar.min.js")'></script>
        <script src="@routes.Assets.versioned("javascripts/hello.js")" type="text/javascript"></script>

        <script>

            var url = "http://85.227.189.115:9000";
            var userId = @user.id;
            var groupId = @user.groupId.get;

            $(document).ready(function() {

                var menu = $("#menu");

                menu.find("ul li").css("display", "inline");
                menu.find("ul li").hover(function() {
                    $(this).css({"text-decoration": "underline", "cursor": "pointer"});
                }, function() {
                    $(this).css("text-decoration", "none");
                });

                menu.find("li").click(function(e) {
                    // console.log(e.target().innerHTML);
                    console.log(e.target.innerHTML);
                    var clicked = e.target.innerHTML;
                    if (clicked == "Underlings") {
                        getUnderlings(function(data) {
                            var underlingsHtml = data.map(function(obj) {
                               return "<p>id: " + obj.id + ", username: " + obj.username + "</p>";
                            });

                            $("#content").html(underlingsHtml);
                        });
                    } else if (clicked == "Calendar") {
                        var emptyCal = "<div id='calendar'></div>";
                        $("#content").html(emptyCal);

                        getEvents(function(data) {
                            setupNewCalendar($("#calendar"), data);
                        });

                    }
                });

                menu.find("li:first").click();

                @* generating javascript from twirl template variables coming from scala fuck this is too deep *@
                @* @if(events.length < 1) {
                    var jsEvents = "no events found";
                } else {
                    var jsEvents = @events;
                } *@


                $.get( url + "/groups/" + groupId + "/users", function( data ) {
                    var underlings = data.filter(function(object) {
                        return object.admin == false;
                    });
                    console.log(underlings);
                });

            });

            function getEvents(callback) {
                $.get( url + "/users/" + userId + "/events", function(data) {
                    callback(data);
                }).fail(function(error) {
                    console.log("horror: " + error);
                })
//                $.get(url + "/users/" + userId + "/events",  )
            }

            function getUnderlings(callback) {
                $.get( url + "/groups/" + groupId + "/users", function( data ) {
                    var underlings = data.filter(function(object) {
                        return object.admin == false;
                    });

                    callback(underlings);
                });
            }

            /* function handleClick(target) {
                if (target == "Underlings") {
                    $("#content").html($("#underlings").clone());
                    console.log("value of underlings: " + $("#underlings").html());
                    $("#content #underlings").css("display", "inline");
                } else if (target == "Calendar") {
                    $("#content").html("<div id='calendar'></div>");
                    setupNewCalendar($("#calendar"), []);
                } else if (target == "Administrator") {
                    console.log("administrator")
                } else {
                    console.log("fallhrtdh in handleclick");
                }
            } */


        </script>

        @* if you want scalaJS
            @playscalajs.html.scripts("client")
        *@
    </head>

    <body>

        <p><span style="font-size: 2em;">admin page: @user.username</span> [<a href="/user/logout">Log out</a>]</p>

        <div id="menu">
            <ul>
                <li>Calendar</li>
                <li>Administrator</li>
                <li>Underlings</li>
            </ul>
        </div>

        <div id="content">
            <div id="calendar">

            </div>

            <span>is this after calendar??</span>

            @events.map { event => <h4>event.eventName</h4> }
        </div>

        @* <div id="underlings" style="display: none">
            <table>
                <tr><th>id</th><th>username</th><th>groupid</th></tr>
                @underlings.map { underling => <tr><td>@underling.id</td><td>@underling.username</td><td>@underling.groupId</td></tr> }
            </table>
        </div> *@
    </body>
</html>
